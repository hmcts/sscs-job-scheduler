language: java
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
deploy:
- provider: script
  script: "./gradlew bintrayUpload"
  skip_cleanup: true
  on:
    repo: hmcts/sscs-job-scheduler
    tags: true
script:
- "./gradlew test"
- "./gradlew functional"
- "./gradlew jacocoTestReport"
after_success:
- java -cp ./codacy-coverage-reporter-assembly-latest.jar com.codacy.CodacyCoverageReporter
  -l Java -r build/reports/jacoco/test/jacocoTestReport.xml
- test "$TRAVIS_BRANCH" = "master" && test "$TRAVIS_PULL_REQUEST" = "false"
env:
  global:
    secure: "P7KtmlsKTw+3/lNly/MeHg88EZjNLyEOuswgxrHsr72mAC1uwglca+OYrDqMN+LV8lu7Q0iFuQf0dOKkmELEHtN3tk2aho5ZL8JeKTTnjMxPSz0E6iUqc2ABaVk59KapyDD5uHgAOgkaOPAEW6pXlPzh5F7aByl8bI/2Md3+C4AMbOSLFqLA2i7p0SPQSHTOWxsw41MIROTmrX7z19m1iUiKwNcjI4r2uOzjGW1IJryGkDJoIhPKCCiWWlTG+pqvfcGt4uyg7OjPnTxfywHqLZRr6kVxjedJ7KAdnPudHkkaASZJ0wRJ8P8ttODne8a8ey0/3i7e0h5nz2A+8eTEwKLJfK9OcXV8Y2yi5wHTBxm6x34k0HTWA3B79Xhhuv19PQqgvCeJ3/7y5CCMP0m4uBidIJ6Jgw8AxkNhuJWliIi35fTrmt4T41vPZ8jN5bVAUnvQlfIvRvatlrL1UQmSWdhPDQQk1qUjdXZjZ+gO1PauTns9sadjs4TEmbWtN5QoXu1TGpvieLNGcpm0PcJOOlowYq5oN+WRbBnIBVPH39CGuIOBRJbpXktFllEjASx16LTHx2KgBaR2e+xuIcPiWfV1m5A0PfvdrgAN1/WqGisEo/Ipkx6YHnYSEleH6Ngapl9y63s/PA5GNJeMxYfdCGYB4zQ14s8xxrp+EmZUEJY="
