language: java
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
deploy:
- provider: script
  script: "./gradlew bintrayUpload"
  skip_cleanup: true
  on:
    repo: hmcts/sscs-job-scheduler
    tags: true
script:
- "./gradlew test"
- "./gradlew functional"
- "./gradlew jacocoTestReport"
after_success:
- java -cp ./codacy-coverage-reporter-assembly-latest.jar com.codacy.CodacyCoverageReporter
  -l Java -r build/reports/jacoco/test/jacocoTestReport.xml
- test "$TRAVIS_BRANCH" = "master" && test "$TRAVIS_PULL_REQUEST" = "false"
env:
  global:
  - secure: PvJ9mLJeC4406/3sq2aut8ZXPhKv4BjHh6Gdi6BtbAhAIU0rWLtEUS1Wj7PzjSCPO/kSbDwgGGXcC0rrJSDaTxWIlrMMiZ3NDJYqXGlvCTymzIOXJJo+UmGwEJwV312zEhDuOEaXRJKVT01Bd1Cj0pV/wrPaJ+XbU8gKndIZGg52crfe3zEWz/94Rb5BB/qhbIn0TwGkRSh1sWRyA0zfHib91AiJX6eXPcEaosqcESeyAogDCojJHDVJyVfl08fnbDdQMFsfcIq7pIFJ1DIngIPzcjqUgcmMl/vEe9u3zktjdLTQKk+TLhgv4AIYkiUq49wfP2xdWeV5e3EUecYb85hmyeGFyDknzxOoQzs7/TUadIPmfn1q131Xkf6zyM66PNl3q+YXzPx631qsuDlujsUZ/0ggNH/Aeb1DL7Vc9u+9hqfAWyU6gSXtMPOVXp+cVwK11h/VKfmh4SH7/dwhMdwUuowIm4OIvcOV3+z4jlzSK46JgL5z0Fh9YWTaUutzKt//MKJsPsB5JLrwwsp8V28m+tgA3QHsKE98vNU9X2PkaPF/Mxuo4U2kk1I+A1WZsein8XX3s9/O2ulpdXS+maQtteKr7SWoaR+jJG2hXHPq5JBn9dg/tlw2l4e1s75V4IDp46eYJvCBANsu9Htr4FrYDn55Pu0geDi1df0tZO8=
  - secure: WA0DIgeYzabuEM+/4cZigeorKtg5jTtkX5kxuwytdLT5xlMOZi7VmLRGe68bi2ebT2CoDzZHRaxnD6S+3YzUUAaq9gTNknJdWZOi/Gxo7ryply51mJSzRuTzZJbX38/eg8Bu+pSpDDS52N/P9Rw1YulHbHV3qtnoH+kNxkEjtMjHJSso5msM0Q5BdXWwV7Qrt84GHiF37P1Qfr2AxVuamggA15j20eKcKH/hhZvPB1NK2AsAmMOE6Itf7XqA9EudYQZh8w7bEdVv9Fn5UaHIgxjWED6bdw56egwVzvJO2r6y8EXw80mugIckZM+oahdLM0lpRzrpiI9UN2fLWssllWNIqmpaTN6UB7wsap37MhxViNB4jLlvn1d7JAjSDqVV47sK9QdK+yIBumWPQeDRDM63UdPqfcm6rpGIXnafsA4+ZKnxWcz09S9CIiXwIr5cbm+jm98aPKkc1U9RcwBs3VO1Iqog368kINok22ofdZv7j7n6HVfMsn0yG6fcxSd80dhnsSLW3W2bFadkwuJzKJLqbRM77zHoZ0ZCw3miWJfNPO4Jg95idpI8PfDf/+fI14WajH4TK9b3GoNOA6bFjib/L6htptPPHe5Iqjp2UZno2nnXfdUxkYgOpZsVMYyS8j9SB25yWZ4zSC6LBUmc3hb4MfFiJoCw7uKcc80iXRY=
