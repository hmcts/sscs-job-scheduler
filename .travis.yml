language: java
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
deploy:
- provider: script
  script: "./gradlew bintrayUpload"
  skip_cleanup: true
  on:
    repo: hmcts/sscs-job-scheduler
    tags: true
script:
- "./gradlew test"
- "./gradlew functional"
- "./gradlew jacocoTestReport"
after_success:
- java -cp ./codacy-coverage-reporter-assembly-latest.jar com.codacy.CodacyCoverageReporter
  -l Java -r build/reports/jacoco/test/jacocoTestReport.xml
- test "$TRAVIS_BRANCH" = "master" && test "$TRAVIS_PULL_REQUEST" = "false"
env:
  global:
  - secure: Ohc+mhk+zMh23gi9m7ipwn7cwOLMjtQKR4gxKlLUYRY1bxIk0ukRgOS7b+0CDHAiPp+9Bt4gzmykg8ya9F7t9pEVwvmS8IMcJ7VE5hu7IKUDH1IHH3of4jekFXxfVLX31mTx4/tt1dnQba+bYtaQ5YU/PZKsCKvU1tbVNnQC53zUb7dU2PmoBqxcQVqmJT1rYOrRkngBYFGFE3UIHP7UE3Pwnc2LXt2WP2CQO3IgDmx8+oCd0uG+Udb4gaWHdzojR4j597a631iMJOg0y4Iq5V71yHXzqw6itK/zeEu4mmr10S4AnR3x72FKTkCyCxmXFKA52u5S+qgwLqWM7kGnMrlKk21/uEeQDsw88JKGam+iJm4ZUxksQQLKRYscGaFlTYxoBYRWHlrOdXUraKgXpfgsHX1SY5kz7lAjBCRfL6E6Y63nncgp+0+iZI5xNI80R2Cvvafs+uWasaOl5XsAu6FRmAgPFRggdCnYiDR8O+EaCmwHcsEpeOthS1rB4E6x5B4ZYWkzhA96Ol+LCP/XWQtR9qSNcpfFG2tu76Bk54LLvwcRQeN6vL/oUTLRHW3qoGDLvv2XEa3afpMwD96Ed3lnjJNIQ2/FE+/x/J6L4lTBfdKSBTEIQFp9AverGmaRZgemwB128xmtpVO3aB7TQUuj0E43z2vtYbYqAoIQIjQ=
  - secure: hjDbvK4Wao+vveafqcsDRqkszyg8JNOutUiDQoKkL+idwVDawCO9pF+eeyTLsuuBzeKQpmmBMIHsajy+Xqv0VtmWx+6ya8QndGWSh4NpBKDFfW2qaga14/YETuiIhXWN/RGGzWm4f6iU4edfp6q1BqdoCvuq3kryw8D9Qketq3BtQNDRQqm7wXe1LpOcPwgCpXAu7b+BxSKRzhU6Up/PzbbG0pxiRpHme2KwYv+K6kU8cpXCeCdHzadv2D0L3oAiC7RzPYjFuJtCGMBixRXy1haDcG0aOq9xhBFqA9sNaGI5RQpWfp0gl3Vu6HuTlvK7W+IVUJS0sKLM6pzT+fkGMARskapXGs2S+xdCZ8TLbvZZGQncGaR3w/n2vLUTG2gtarGyEosc+biMvbnFMnT8WCzFL8BoEt2Qv59EfqYC5+F9r6TkEKaIPrCCPYswC3lBivP9tix4UlluK7O9Macm6K4m6LewFG7tIqL1u12Q2m10hCExFnviyrxTBenb/MY0Y1aNl5Ez2dPWDZkx9sG+vycl9Ls1xuqqnSakpSwK/KcroQhzHtj7DHB4/jkqYRXOdQcS0H4St7/kELanjN6wLAzMrH3BhUcIddqIEvmsBLaCZSALZXVf4ajs0AkyjXbml9VuGm1Nm3EoaLLFPGr6SCa8EmPi7fvNESYW92cwaSA=
